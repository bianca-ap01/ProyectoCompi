{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/bianca/Documents/compi/ProyectoCompi/frontend/components/grammar-panel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport Editor, { type OnMount } from \"@monaco-editor/react\"\r\nimport type * as monaco from \"monaco-editor\"\r\n\r\ninterface GrammarPanelProps {\r\n  code: string\r\n  setCode: (value: string) => void\r\n  activeLine?: number\r\n}\r\n\r\nexport function GrammarPanel({ code, setCode, activeLine }: GrammarPanelProps) {\r\n  const [editorInstance, setEditorInstance] = useState<monaco.editor.IStandaloneCodeEditor | null>(null)\r\n  const monacoRef = useRef<typeof import(\"monaco-editor\")>()\r\n  const decorationsRef = useRef<string[]>([])\r\n\r\n  const handleEditorChange = (value: string | undefined) => {\r\n    if (value !== undefined) setCode(value)\r\n  }\r\n\r\n  const handleMount: OnMount = (editor, monacoInstance) => {\r\n    setEditorInstance(editor)\r\n    monacoRef.current = monacoInstance\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!editorInstance || !monacoRef.current) return\r\n    const m = monacoRef.current\r\n    const decos =\r\n      activeLine && activeLine > 0\r\n        ? [\r\n            {\r\n              range: new m.Range(activeLine, 1, activeLine, 1),\r\n              options: {\r\n                isWholeLine: true,\r\n                className: \"code-active-line\",\r\n                marginClassName: \"code-active-line-margin\",\r\n              },\r\n            },\r\n          ]\r\n        : []\r\n    decorationsRef.current = editorInstance.deltaDecorations(decorationsRef.current, decos)\r\n    if (activeLine && activeLine > 0) {\r\n      editorInstance.revealLineInCenter(activeLine)\r\n    }\r\n  }, [activeLine, editorInstance])\r\n\r\n  return (\r\n    <div className=\"h-full w-full\" id=\"code-editor-pane\">\r\n      <Editor\r\n        height=\"100%\"\r\n        defaultLanguage=\"c\"\r\n        theme=\"vs-dark\"\r\n        value={code}\r\n        onChange={handleEditorChange}\r\n        onMount={handleMount}\r\n        options={{\r\n          minimap: { enabled: false },\r\n          fontSize: 13,\r\n          fontFamily: \"'JetBrains Mono', 'Fira Code', monospace\",\r\n          lineNumbers: \"on\",\r\n          scrollBeyondLastLine: false,\r\n          automaticLayout: true,\r\n          tabSize: 4,\r\n          padding: { top: 12, bottom: 12 },\r\n          renderLineHighlight: \"gutter\",\r\n          cursorBlinking: \"smooth\",\r\n          smoothScrolling: true,\r\n          bracketPairColorization: { enabled: true },\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYO,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAqB;IAC3E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAA6C;IACjG,MAAM,YAAY,IAAA,+MAAM;IACxB,MAAM,iBAAiB,IAAA,+MAAM,EAAW,EAAE;IAE1C,MAAM,qBAAqB,CAAC;QAC1B,IAAI,UAAU,WAAW,QAAQ;IACnC;IAEA,MAAM,cAAuB,CAAC,QAAQ;QACpC,kBAAkB;QAClB,UAAU,OAAO,GAAG;IACtB;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,kBAAkB,CAAC,UAAU,OAAO,EAAE;QAC3C,MAAM,IAAI,UAAU,OAAO;QAC3B,MAAM,QACJ,cAAc,aAAa,IACvB;YACE;gBACE,OAAO,IAAI,EAAE,KAAK,CAAC,YAAY,GAAG,YAAY;gBAC9C,SAAS;oBACP,aAAa;oBACb,WAAW;oBACX,iBAAiB;gBACnB;YACF;SACD,GACD,EAAE;QACR,eAAe,OAAO,GAAG,eAAe,gBAAgB,CAAC,eAAe,OAAO,EAAE;QACjF,IAAI,cAAc,aAAa,GAAG;YAChC,eAAe,kBAAkB,CAAC;QACpC;IACF,GAAG;QAAC;QAAY;KAAe;IAE/B,qBACE,8OAAC;QAAI,WAAU;QAAgB,IAAG;kBAChC,cAAA,8OAAC,wLAAM;YACL,QAAO;YACP,iBAAgB;YAChB,OAAM;YACN,OAAO;YACP,UAAU;YACV,SAAS;YACT,SAAS;gBACP,SAAS;oBAAE,SAAS;gBAAM;gBAC1B,UAAU;gBACV,YAAY;gBACZ,aAAa;gBACb,sBAAsB;gBACtB,iBAAiB;gBACjB,SAAS;gBACT,SAAS;oBAAE,KAAK;oBAAI,QAAQ;gBAAG;gBAC/B,qBAAqB;gBACrB,gBAAgB;gBAChB,iBAAiB;gBACjB,yBAAyB;oBAAE,SAAS;gBAAK;YAC3C;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///home/bianca/Documents/compi/ProyectoCompi/frontend/components/memory-visualizer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useMemo, useRef, useState } from \"react\"\nimport { ImageIcon } from \"lucide-react\"\nimport type { StackFrame } from \"@/lib/compiler-service\"\n\ninterface MemoryVisualizerProps {\n  imageBase64?: string\n  stack?: StackFrame[]\n  output?: string\n  activeIndex: number\n  setActiveIndex: (idx: number) => void\n}\n\nexport function MemoryVisualizer({ imageBase64, stack, output, activeIndex, setActiveIndex }: MemoryVisualizerProps) {\n  const hasStack = useMemo(() => !!stack && stack.length > 0, [stack])\n  const snaps = stack ?? []\n  const indexedSnaps = snaps.map((s, idx) => ({ snap: s, idx }))\n\n  const isProlog = (s: StackFrame) => {\n    const func = (s.func || \"\").toLowerCase()\n    const lineVal = s.line ?? -1\n    return func !== \"main\" || lineVal <= 0\n  }\n\n  const prologSnaps = (() => {\n    const seen = new Set<string>()\n    const list: typeof indexedSnaps = []\n    indexedSnaps.forEach(({ snap, idx }) => {\n      if (!isProlog(snap)) return\n      const key = `${(snap.func || \"global\").toLowerCase()}|${(snap.label || \"\").toLowerCase()}|${snap.line ?? -1}`\n      if (seen.has(key)) return\n      seen.add(key)\n      list.push({ snap, idx })\n    })\n    return list\n  })()\n  const mainSnaps = indexedSnaps\n    .filter(({ snap }) => !isProlog(snap))\n    .sort((a, b) => {\n      const la = a.snap.line ?? Number.MAX_SAFE_INTEGER\n      const lb = b.snap.line ?? Number.MAX_SAFE_INTEGER\n      if (la !== lb) return la - lb\n      return a.idx - b.idx\n    })\n\n  const diffForIndex = (idx: number) => {\n    const snap = snaps[idx]\n    const prevSnap = idx > 0 ? snaps[idx - 1] : undefined\n    if (!snap) return { added: [] as string[], updated: new Set<string>() }\n    const prevMap = prevSnap ? new Map(prevSnap.vars.map((v) => [v.name, v])) : new Map<string, typeof snap.vars[number]>()\n    const added: string[] = []\n    const updated = new Set<string>()\n    snap.vars.forEach((v) => {\n      const p = prevMap.get(v.name)\n      if (!p) {\n        added.push(v.name)\n      } else if (p.value !== v.value || p.offset !== v.offset) {\n        updated.add(v.name)\n      }\n    })\n    return { added, updated }\n  }\n\n  const effectiveIdx =\n    activeIndex < snaps.length && snaps[activeIndex] ? activeIndex : mainSnaps[0]?.idx ?? activeIndex\n  const current = snaps[effectiveIdx] ?? snaps[0]\n  const prev = effectiveIdx > 0 ? snaps[effectiveIdx - 1] : undefined\n  const activeSnapRef = useRef<HTMLButtonElement | null>(null)\n\n  useEffect(() => {\n    if (activeIndex >= snaps.length) setActiveIndex(0)\n  }, [snaps.length, activeIndex, setActiveIndex])\n\n  useEffect(() => {\n    if (activeSnapRef.current) {\n      activeSnapRef.current.scrollIntoView({ behavior: \"smooth\", block: \"center\", inline: \"center\" })\n    }\n  }, [activeIndex])\n\n  const changes = useMemo(() => {\n    if (!current) return { added: [] as string[], updated: new Set<string>() }\n    const prevMap = prev ? new Map(prev.vars.map((v) => [v.name, v])) : new Map<string, typeof current.vars[number]>()\n    const added: string[] = []\n    const updated = new Set<string>()\n    current.vars.forEach((v) => {\n      const p = prevMap.get(v.name)\n      if (!p) {\n        added.push(v.name)\n      } else if (p.value !== v.value || p.offset !== v.offset) {\n        updated.add(v.name)\n      }\n    })\n    return { added, updated }\n  }, [current, prev])\n\n  if (!hasStack && !imageBase64) {\n    return (\n      <div className=\"h-full flex flex-col items-center justify-center gap-3 text-muted-foreground p-6 bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950\">\n        <div className=\"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center\">\n          <ImageIcon className=\"opacity-70\" size={20} />\n        </div>\n        <p className=\"text-sm text-center\">La visualización de memoria aparecerá aquí...</p>\n      </div>\n    )\n  }\n\n  if (hasStack) {\n    return (\n      <div className=\"h-full w-full flex flex-col bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border border-white/10\">\n        <div className=\"border-b border-white/10 bg-white/5 px-3 py-2 space-y-2\">\n          <div className=\"flex items-center justify-between text-xs text-slate-300\">\n            <span className=\"uppercase tracking-[0.15em]\">Código / Snapshots</span>\n            <span>{snaps.length} paso(s)</span>\n          </div>\n          {[{ title: \"Prolog\", list: prologSnaps }, { title: \"Código\", list: mainSnaps }].map(\n            (section) =>\n              section.list.length > 0 && (\n                <div key={section.title} className=\"space-y-2\">\n                  <div className=\"text-[11px] uppercase tracking-[0.18em] text-slate-400\">{section.title}</div>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-52 overflow-auto scrollbar-transparent\">\n                    {section.list.map(({ snap: s, idx }) => {\n                      const diff = diffForIndex(idx)\n                      const label = s.line && s.line > 0 ? `L${s.line} · ${s.label}` : s.label\n                      const funcTag = s.func && s.func.toLowerCase() !== \"main\" ? s.func : \"\"\n                      return (\n                        <button\n                          key={`${label}-${idx}`}\n                          ref={activeIndex === idx ? activeSnapRef : undefined}\n                          onClick={() => setActiveIndex(idx)}\n                          className={`text-left rounded-xl border border-white/10 px-3 py-2 transition-colors ${\n                            activeIndex === idx\n                              ? \"bg-sky-500/80 text-slate-900 shadow-sm shadow-sky-500/40\"\n                              : \"bg-white/10 text-slate-100 hover:bg-white/20\"\n                          }`}\n                        >\n                          <div className=\"flex items-center justify-between text-[11px] font-semibold font-mono uppercase tracking-wide\">\n                            <span className=\"truncate\">{label}</span>\n                            {funcTag && <span className=\"text-[10px] text-sky-200\">{funcTag}</span>}\n                          </div>\n                          {(diff.added.length > 0 || diff.updated.size > 0) && (\n                            <div className=\"text-[10px] text-slate-200 mt-1 space-y-1\">\n                              {diff.added.length > 0 && (\n                                <div>\n                                  <span className=\"text-emerald-300 font-semibold\">+ </span>\n                                  {diff.added.join(\", \")}\n                                </div>\n                              )}\n                              {diff.updated.size > 0 && (\n                                <div>\n                                  <span className=\"text-amber-300 font-semibold\">↻ </span>\n                                  {Array.from(diff.updated).join(\", \")}\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </button>\n                      )\n                    })}\n                  </div>\n                </div>\n              ),\n          )}\n        </div>\n\n        <div className=\"flex-1 overflow-auto p-4\">\n          {current ? (\n            <div className=\"rounded-2xl border border-white/10 bg-[#0d152a]/80 backdrop-blur-xl p-3 shadow-lg shadow-black/30 space-y-2\">\n              <div className=\"flex items-center justify-between text-xs text-slate-200 mb-1\">\n                <span className=\"font-semibold text-white uppercase tracking-wide text-[11px] flex items-center gap-2\">\n                  {current.label}\n                  {current.line !== undefined && current.line > 0 && (\n                    <span className=\"text-[10px] text-sky-200 font-mono px-2 py-0.5 rounded bg-sky-500/15 border border-sky-500/30\">\n                      L{current.line}\n                    </span>\n                  )}\n                </span>\n              </div>\n              {(changes.added.length > 0 || changes.updated.size > 0) && (\n                <div className=\"text-[11px] text-slate-200\">\n                  {changes.added.length > 0 && (\n                    <div className=\"mb-1\">\n                      <span className=\"text-emerald-300 font-semibold\">Nuevas:</span>{\" \"}\n                      {changes.added.join(\", \")}\n                    </div>\n                  )}\n                  {changes.updated.size > 0 && (\n                    <div>\n                      <span className=\"text-amber-300 font-semibold\">Actualizadas:</span>{\" \"}\n                      {Array.from(changes.updated).join(\", \")}\n                    </div>\n                  )}\n                </div>\n              )}\n              <div className=\"w-full overflow-x-auto\">\n                <table className=\"min-w-full text-[11px] font-mono border border-white/10 rounded-xl overflow-hidden\">\n                  <thead className=\"bg-slate-800/70 text-slate-100 uppercase\">\n                    <tr>\n                      <th className=\"px-2 py-2 border-r border-white/10 text-left\">Var</th>\n                      <th className=\"px-2 py-2 border-r border-white/10 text-left\">Addr</th>\n                      <th className=\"px-2 py-2 text-left\">Val</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {current.vars.map((v, i) => (\n                      <tr\n                        key={`${v.name}-${i}`}\n                        className={`text-slate-100 ${\n                          changes.updated.has(v.name)\n                            ? \"bg-amber-500/30\"\n                            : \"odd:bg-white/5 even:bg-white/10\"\n                        }`}\n                      >\n                        <td className=\"px-2 py-2 border-r border-white/10\">\n                          <div className=\"font-semibold\">{v.name}</div>\n                          <div className=\"text-[10px] text-slate-400\">{v.type || \"\"}</div>\n                        </td>\n                        <td className=\"px-2 py-2 border-r border-white/10 text-sky-200\">\n                          {v.offset !== undefined ? `${v.offset}(%rbp)` : \"\"}\n                        </td>\n                        <td className=\"px-2 py-2 text-emerald-200\">{v.value || \"?\"}</td>\n                      </tr>\n                    ))}\n                    {current.vars.length === 0 && (\n                      <tr>\n                        <td colSpan={3} className=\"px-2 py-3 text-center text-slate-400\">\n                          Sin variables en este frame\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-sm text-slate-400\">Sin snapshot seleccionado.</div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  // Fallback: imagen base64 del backend\n  return (\n    <div className=\"h-full w-full flex flex-col bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border border-white/10\">\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-white/10 bg-white/5 text-xs text-slate-200\">\n        <span className=\"uppercase tracking-[0.15em] text-slate-400\">Memoria / Stack (imagen)</span>\n      </div>\n\n      <div className=\"flex-1 overflow-auto p-4\">\n        <div className=\"relative w-full min-h-[300px] flex justify-center\">\n          <img\n            src={`data:image/png;base64,${imageBase64}`}\n            alt=\"Diagrama de Memoria\"\n            className=\"shadow-2xl shadow-black/40 border border-white/10 rounded-2xl max-w-full h-auto\"\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAcO,SAAS,iBAAiB,EAAE,WAAW,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,cAAc,EAAyB;IACjH,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,CAAC,CAAC,SAAS,MAAM,MAAM,GAAG,GAAG;QAAC;KAAM;IACnE,MAAM,QAAQ,SAAS,EAAE;IACzB,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC,GAAG,MAAQ,CAAC;YAAE,MAAM;YAAG;QAAI,CAAC;IAE5D,MAAM,WAAW,CAAC;QAChB,MAAM,OAAO,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,WAAW;QACvC,MAAM,UAAU,EAAE,IAAI,IAAI,CAAC;QAC3B,OAAO,SAAS,UAAU,WAAW;IACvC;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,OAAO,IAAI;QACjB,MAAM,OAA4B,EAAE;QACpC,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE;YACjC,IAAI,CAAC,SAAS,OAAO;YACrB,MAAM,MAAM,GAAG,CAAC,KAAK,IAAI,IAAI,QAAQ,EAAE,WAAW,GAAG,CAAC,EAAE,CAAC,KAAK,KAAK,IAAI,EAAE,EAAE,WAAW,GAAG,CAAC,EAAE,KAAK,IAAI,IAAI,CAAC,GAAG;YAC7G,IAAI,KAAK,GAAG,CAAC,MAAM;YACnB,KAAK,GAAG,CAAC;YACT,KAAK,IAAI,CAAC;gBAAE;gBAAM;YAAI;QACxB;QACA,OAAO;IACT,CAAC;IACD,MAAM,YAAY,aACf,MAAM,CAAC,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC,SAAS,OAC/B,IAAI,CAAC,CAAC,GAAG;QACR,MAAM,KAAK,EAAE,IAAI,CAAC,IAAI,IAAI,OAAO,gBAAgB;QACjD,MAAM,KAAK,EAAE,IAAI,CAAC,IAAI,IAAI,OAAO,gBAAgB;QACjD,IAAI,OAAO,IAAI,OAAO,KAAK;QAC3B,OAAO,EAAE,GAAG,GAAG,EAAE,GAAG;IACtB;IAEF,MAAM,eAAe,CAAC;QACpB,MAAM,OAAO,KAAK,CAAC,IAAI;QACvB,MAAM,WAAW,MAAM,IAAI,KAAK,CAAC,MAAM,EAAE,GAAG;QAC5C,IAAI,CAAC,MAAM,OAAO;YAAE,OAAO,EAAE;YAAc,SAAS,IAAI;QAAc;QACtE,MAAM,UAAU,WAAW,IAAI,IAAI,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM;gBAAC,EAAE,IAAI;gBAAE;aAAE,KAAK,IAAI;QAChF,MAAM,QAAkB,EAAE;QAC1B,MAAM,UAAU,IAAI;QACpB,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC;YACjB,MAAM,IAAI,QAAQ,GAAG,CAAC,EAAE,IAAI;YAC5B,IAAI,CAAC,GAAG;gBACN,MAAM,IAAI,CAAC,EAAE,IAAI;YACnB,OAAO,IAAI,EAAE,KAAK,KAAK,EAAE,KAAK,IAAI,EAAE,MAAM,KAAK,EAAE,MAAM,EAAE;gBACvD,QAAQ,GAAG,CAAC,EAAE,IAAI;YACpB;QACF;QACA,OAAO;YAAE;YAAO;QAAQ;IAC1B;IAEA,MAAM,eACJ,cAAc,MAAM,MAAM,IAAI,KAAK,CAAC,YAAY,GAAG,cAAc,SAAS,CAAC,EAAE,EAAE,OAAO;IACxF,MAAM,UAAU,KAAK,CAAC,aAAa,IAAI,KAAK,CAAC,EAAE;IAC/C,MAAM,OAAO,eAAe,IAAI,KAAK,CAAC,eAAe,EAAE,GAAG;IAC1D,MAAM,gBAAgB,IAAA,+MAAM,EAA2B;IAEvD,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe,MAAM,MAAM,EAAE,eAAe;IAClD,GAAG;QAAC,MAAM,MAAM;QAAE;QAAa;KAAe;IAE9C,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc,OAAO,EAAE;YACzB,cAAc,OAAO,CAAC,cAAc,CAAC;gBAAE,UAAU;gBAAU,OAAO;gBAAU,QAAQ;YAAS;QAC/F;IACF,GAAG;QAAC;KAAY;IAEhB,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,IAAI,CAAC,SAAS,OAAO;YAAE,OAAO,EAAE;YAAc,SAAS,IAAI;QAAc;QACzE,MAAM,UAAU,OAAO,IAAI,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM;gBAAC,EAAE,IAAI;gBAAE;aAAE,KAAK,IAAI;QACxE,MAAM,QAAkB,EAAE;QAC1B,MAAM,UAAU,IAAI;QACpB,QAAQ,IAAI,CAAC,OAAO,CAAC,CAAC;YACpB,MAAM,IAAI,QAAQ,GAAG,CAAC,EAAE,IAAI;YAC5B,IAAI,CAAC,GAAG;gBACN,MAAM,IAAI,CAAC,EAAE,IAAI;YACnB,OAAO,IAAI,EAAE,KAAK,KAAK,EAAE,KAAK,IAAI,EAAE,MAAM,KAAK,EAAE,MAAM,EAAE;gBACvD,QAAQ,GAAG,CAAC,EAAE,IAAI;YACpB;QACF;QACA,OAAO;YAAE;YAAO;QAAQ;IAC1B,GAAG;QAAC;QAAS;KAAK;IAElB,IAAI,CAAC,YAAY,CAAC,aAAa;QAC7B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,qNAAS;wBAAC,WAAU;wBAAa,MAAM;;;;;;;;;;;8BAE1C,8OAAC;oBAAE,WAAU;8BAAsB;;;;;;;;;;;;IAGzC;IAEA,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAA8B;;;;;;8CAC9C,8OAAC;;wCAAM,MAAM,MAAM;wCAAC;;;;;;;;;;;;;wBAErB;4BAAC;gCAAE,OAAO;gCAAU,MAAM;4BAAY;4BAAG;gCAAE,OAAO;gCAAU,MAAM;4BAAU;yBAAE,CAAC,GAAG,CACjF,CAAC,UACC,QAAQ,IAAI,CAAC,MAAM,GAAG,mBACpB,8OAAC;gCAAwB,WAAU;;kDACjC,8OAAC;wCAAI,WAAU;kDAA0D,QAAQ,KAAK;;;;;;kDACtF,8OAAC;wCAAI,WAAU;kDACZ,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,GAAG,EAAE;4CACjC,MAAM,OAAO,aAAa;4CAC1B,MAAM,QAAQ,EAAE,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK;4CACxE,MAAM,UAAU,EAAE,IAAI,IAAI,EAAE,IAAI,CAAC,WAAW,OAAO,SAAS,EAAE,IAAI,GAAG;4CACrE,qBACE,8OAAC;gDAEC,KAAK,gBAAgB,MAAM,gBAAgB;gDAC3C,SAAS,IAAM,eAAe;gDAC9B,WAAW,CAAC,wEAAwE,EAClF,gBAAgB,MACZ,6DACA,gDACJ;;kEAEF,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAK,WAAU;0EAAY;;;;;;4DAC3B,yBAAW,8OAAC;gEAAK,WAAU;0EAA4B;;;;;;;;;;;;oDAEzD,CAAC,KAAK,KAAK,CAAC,MAAM,GAAG,KAAK,KAAK,OAAO,CAAC,IAAI,GAAG,CAAC,mBAC9C,8OAAC;wDAAI,WAAU;;4DACZ,KAAK,KAAK,CAAC,MAAM,GAAG,mBACnB,8OAAC;;kFACC,8OAAC;wEAAK,WAAU;kFAAiC;;;;;;oEAChD,KAAK,KAAK,CAAC,IAAI,CAAC;;;;;;;4DAGpB,KAAK,OAAO,CAAC,IAAI,GAAG,mBACnB,8OAAC;;kFACC,8OAAC;wEAAK,WAAU;kFAA+B;;;;;;oEAC9C,MAAM,IAAI,CAAC,KAAK,OAAO,EAAE,IAAI,CAAC;;;;;;;;;;;;;;+CAxBlC,GAAG,MAAM,CAAC,EAAE,KAAK;;;;;wCA+B5B;;;;;;;+BAxCM,QAAQ,KAAK;;;;;;;;;;;8BA+C/B,8OAAC;oBAAI,WAAU;8BACZ,wBACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAK,WAAU;;wCACb,QAAQ,KAAK;wCACb,QAAQ,IAAI,KAAK,aAAa,QAAQ,IAAI,GAAG,mBAC5C,8OAAC;4CAAK,WAAU;;gDAAgG;gDAC5G,QAAQ,IAAI;;;;;;;;;;;;;;;;;;4BAKrB,CAAC,QAAQ,KAAK,CAAC,MAAM,GAAG,KAAK,QAAQ,OAAO,CAAC,IAAI,GAAG,CAAC,mBACpD,8OAAC;gCAAI,WAAU;;oCACZ,QAAQ,KAAK,CAAC,MAAM,GAAG,mBACtB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAiC;;;;;;4CAAe;4CAC/D,QAAQ,KAAK,CAAC,IAAI,CAAC;;;;;;;oCAGvB,QAAQ,OAAO,CAAC,IAAI,GAAG,mBACtB,8OAAC;;0DACC,8OAAC;gDAAK,WAAU;0DAA+B;;;;;;4CAAqB;4CACnE,MAAM,IAAI,CAAC,QAAQ,OAAO,EAAE,IAAI,CAAC;;;;;;;;;;;;;0CAK1C,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAM,WAAU;;sDACf,8OAAC;4CAAM,WAAU;sDACf,cAAA,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAA+C;;;;;;kEAC7D,8OAAC;wDAAG,WAAU;kEAA+C;;;;;;kEAC7D,8OAAC;wDAAG,WAAU;kEAAsB;;;;;;;;;;;;;;;;;sDAGxC,8OAAC;;gDACE,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,kBACpB,8OAAC;wDAEC,WAAW,CAAC,eAAe,EACzB,QAAQ,OAAO,CAAC,GAAG,CAAC,EAAE,IAAI,IACtB,oBACA,mCACJ;;0EAEF,8OAAC;gEAAG,WAAU;;kFACZ,8OAAC;wEAAI,WAAU;kFAAiB,EAAE,IAAI;;;;;;kFACtC,8OAAC;wEAAI,WAAU;kFAA8B,EAAE,IAAI,IAAI;;;;;;;;;;;;0EAEzD,8OAAC;gEAAG,WAAU;0EACX,EAAE,MAAM,KAAK,YAAY,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG;;;;;;0EAElD,8OAAC;gEAAG,WAAU;0EAA8B,EAAE,KAAK,IAAI;;;;;;;uDAdlD,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,GAAG;;;;;gDAiBxB,QAAQ,IAAI,CAAC,MAAM,KAAK,mBACvB,8OAAC;8DACC,cAAA,8OAAC;wDAAG,SAAS;wDAAG,WAAU;kEAAuC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6CAU7E,8OAAC;wBAAI,WAAU;kCAAyB;;;;;;;;;;;;;;;;;IAKlD;IAEA,sCAAsC;IACtC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,WAAU;8BAA6C;;;;;;;;;;;0BAG/D,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBACC,KAAK,CAAC,sBAAsB,EAAE,aAAa;wBAC3C,KAAI;wBACJ,WAAU;;;;;;;;;;;;;;;;;;;;;;AAMtB"}},
    {"offset": {"line": 690, "column": 0}, "map": {"version":3,"sources":["file:///home/bianca/Documents/compi/ProyectoCompi/frontend/lib/compiler-service.tsx"],"sourcesContent":["export interface CompilationResponse {\n  success: boolean\n  output: string\n  logs: string\n  stack?: StackFrame[]\n  asm?: string\n  asm_by_line?: Record<number, string[]>\n}\n\r\nexport type StackVar = {\r\n  name: string\r\n  value: string\r\n  offset?: number\r\n  type?: string\r\n}\r\n\r\nexport type StackFrame = {\n  label: string\n  vars: StackVar[]\n  sp?: number\n  line?: number\n  idx?: number\n  func?: string\n}\n\r\nconst API_URL = process.env.NEXT_PUBLIC_COMPILER_API_URL || \"http://localhost:8000\"\r\n\r\nexport async function compileCode(code: string): Promise<CompilationResponse> {\r\n  try {\r\n    const response = await fetch(`${API_URL}/compile`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ code }),\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Compilation failed\")\r\n    }\r\n\r\n    return response.json()\r\n  } catch (error) {\r\n    console.error(\"Error conectando con el compilador:\", error)\r\n    throw error\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAyBA,MAAM,UAAU,6DAA4C;AAErD,eAAe,YAAY,IAAY;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,QAAQ,CAAC,EAAE;YACjD,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAK;QAC9B;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,MAAM;IACR;AACF"}},
    {"offset": {"line": 719, "column": 0}, "map": {"version":3,"sources":["file:///home/bianca/Documents/compi/ProyectoCompi/frontend/app/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\nimport { Play, Activity, AlertCircle, Code2, Zap, FileCode2 } from \"lucide-react\"\nimport { GrammarPanel } from \"@/components/grammar-panel\"\nimport { MemoryVisualizer } from \"@/components/memory-visualizer\"\nimport { compileCode, type StackFrame } from \"@/lib/compiler-service\"\n\r\nexport default function Home() {\r\n  const [code, setCode] = useState(\r\n    `#include <stdio.h>\r\n\r\nint main() {\r\n    int x;\r\n    int y;\r\n    long z;\r\n\r\n    x = 1;\r\n    y = 10;\r\n    z = 1000000;\r\n\r\n    x = 20;\r\n\r\n    printf(\" %d\\\\n\", x);\r\n    printf(\" %d\\\\n\", y);\r\n    printf(\" %ld\\\\n\", z);\r\n\r\n    return 0;\r\n}`,\r\n  )\r\n\r\n  const [output, setOutput] = useState(\"\")\r\n  const [logs, setLogs] = useState(\"\")\r\n  const [image, setImage] = useState(\"\")\r\n  const [stack, setStack] = useState<StackFrame[]>([])\r\n  const [asm, setAsm] = useState(\"\")\r\n  const [asmByLine, setAsmByLine] = useState<Record<number, string[]> | undefined>(undefined)\r\n  const [showFullAsm, setShowFullAsm] = useState(false)\r\n  const asmActiveRef = useRef<HTMLDivElement | null>(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [activeTab, setActiveTab] = useState<\"memory\" | \"logs\">(\"memory\")\r\n  const [activeSnap, setActiveSnap] = useState(0)\n  const activeSnapshot = stack[activeSnap]\n  const totalSnapshots = stack.length\n  const CODE_KEY = \"orbit-code\"\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return\n    const saved = localStorage.getItem(CODE_KEY)\n    if (saved && saved.length > 0) {\n      setCode(saved)\n    }\n  }, [])\n\n  const handleCodeChange = (value: string) => {\n    setCode(value)\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(CODE_KEY, value)\n    }\n  }\n\r\n  const goPrev = () => setActiveSnap((idx) => (idx > 0 ? idx - 1 : idx))\r\n  const goNext = () => setActiveSnap((idx) => (idx + 1 < totalSnapshots ? idx + 1 : idx))\r\n  const handleRun = async () => {\r\n    setLoading(true)\r\n    setOutput(\"\")\r\n    setLogs(\"\")\r\n    setImage(\"\")\r\n    setStack([])\r\n    setAsm(\"\")\r\n    setAsmByLine(undefined)\r\n    setShowFullAsm(false)\n    setActiveSnap(0)\n\r\n    try {\r\n      const result = await compileCode(code)\r\n      setOutput(result.output)\r\n      setLogs(result.logs)\r\n      setImage(result.image_b64 || \"\")\r\n      setStack(result.stack || [])\r\n    setAsm(result.asm || \"\")\r\n    setAsmByLine(result.asm_by_line)\r\n    setActiveTab(result.stack && result.stack.length > 0 ? \"memory\" : \"logs\")\r\n  } catch (error) {\r\n      setOutput(\"Error de conexión con el servidor.\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (asmActiveRef.current && !showFullAsm) {\r\n      asmActiveRef.current.scrollIntoView({ behavior: \"smooth\", block: \"center\" })\r\n    }\r\n  }, [activeSnap, showFullAsm, asmByLine])\r\n\r\n  const rawLine = stack[activeSnap]?.line ?? -1\n  const editorLine = rawLine > 0 ? rawLine : undefined\n\n  useEffect(() => {\n    const editorPane = document.getElementById(\"code-editor-pane\")\n    if (editorPane && editorLine) {\n      const lines = editorPane.querySelectorAll(\".cm-line\")\n      const target = lines[editorLine - 1] as HTMLElement | undefined\n      if (target) {\n        target.scrollIntoView({ behavior: \"smooth\", block: \"center\" })\n      }\n    }\n  }, [activeSnap, stack, editorLine])\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground text-sm\">\r\n      {/* Header */}\r\n      <header className=\"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-50\">\r\n        <div className=\"max-w-[1600px] mx-auto px-4 h-12 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center justify-center w-8 h-8 rounded-lg bg-accent/10 border border-accent/20\">\r\n              <Code2 size={16} className=\"text-accent\" />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-semibold text-foreground\">Orbit</span>\r\n              <span className=\"text-muted-foreground text-sm hidden sm:inline\">/ Compiler</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-muted border border-border text-[11px]\">\r\n              <span className={`w-1.5 h-1.5 rounded-full ${loading ? \"bg-warning animate-pulse\" : \"bg-success\"}`} />\r\n              <span className=\"text-muted-foreground\">{loading ? \"Compilando...\" : \"Listo\"}</span>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleRun}\r\n              disabled={loading}\r\n              className={`flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 ${\r\n                loading\r\n                  ? \"bg-muted text-muted-foreground cursor-wait\"\r\n                  : \"bg-accent hover:bg-accent/90 text-accent-foreground shadow-lg shadow-accent/20\"\r\n              }`}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"w-3.5 h-3.5 border-2 border-muted-foreground/30 border-t-muted-foreground rounded-full animate-spin\" />\r\n                  <span className=\"hidden sm:inline\">Compilando</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Play size={14} fill=\"currentColor\" />\r\n                  <span>Ejecutar</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-[1600px] mx-auto p-3 md:p-4\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-3 min-h-[calc(100vh-7rem)]\">\r\n          {/* Code Editor Panel */}\r\n          <div className=\"lg:col-span-1 rounded-xl bg-card border border-border overflow-hidden flex flex-col\">\r\n            <div className=\"flex items-center justify-between px-4 h-11 border-b border-border bg-muted/30\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <span className=\"w-3 h-3 rounded-full bg-destructive/80\" />\r\n                  <span className=\"w-3 h-3 rounded-full bg-warning/80\" />\r\n                  <span className=\"w-3 h-3 rounded-full bg-success/80\" />\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <span className=\"text-foreground font-medium\">main.c</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n                <Zap size={12} />\r\n                <span>x86-64</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex-1 min-h-0 flex flex-col\">\r\n              <div className=\"flex-1 min-h-0\">\r\n                <GrammarPanel code={code} setCode={handleCodeChange} activeLine={editorLine} />\n              </div>\r\n              <div className=\"border-t border-border bg-muted/20 h-32 px-3 py-2 overflow-auto scrollbar-transparent\">\r\n                <div className=\"text-xs uppercase tracking-[0.15em] text-muted-foreground mb-1\">Salida</div>\r\n                <pre className=\"text-xs font-mono text-foreground whitespace-pre-wrap\">\r\n                  {output || <span className=\"text-muted-foreground italic\">Sin salida.</span>}\r\n                </pre>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Columna ASM */}\r\n          <div className=\"rounded-xl bg-card border border-border overflow-hidden flex flex-col\">\r\n            <div className=\"px-4 h-11 border-b border-border bg-muted/30 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n                <FileCode2 size={12} />\r\n                <span className=\"uppercase tracking-[0.15em]\">ASM</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={goPrev}\r\n                  disabled={activeSnap === 0 || totalSnapshots === 0}\r\n                  className=\"px-2 py-1 rounded border border-border bg-muted/40 text-foreground text-[11px] disabled:opacity-50\"\r\n                >\r\n                  ←\r\n                </button>\r\n                <button\r\n                  onClick={goNext}\r\n                  disabled={activeSnap + 1 >= totalSnapshots || totalSnapshots === 0}\r\n                  className=\"px-2 py-1 rounded border border-border bg-muted/40 text-foreground text-[11px] disabled:opacity-50\"\r\n                >\r\n                  →\r\n                </button>\r\n                {activeSnapshot?.line ? (\r\n                  <div className=\"text-[11px] text-muted-foreground font-mono\">\r\n                    Línea {activeSnapshot.line}\r\n                  </div>\r\n                ) : null}\r\n                <button\r\n                  onClick={() => {\r\n                    const next = !showFullAsm\r\n                    setShowFullAsm(next)\r\n                    if (!next && stack.length > 0) {\r\n                      setActiveSnap(stack.length - 1)\r\n                    }\r\n                    if (next) {\r\n                      // al ver código completo, desplazarse al inicio\r\n                      const container = document.getElementById(\"asm-scroll-container\")\r\n                      if (container) container.scrollTop = 0\r\n                    }\r\n                  }}\r\n                  className=\"text-[11px] px-2 py-1 rounded border border-border hover:bg-muted/40 text-foreground\"\r\n                >\r\n                  {showFullAsm ? \"Ver por línea\" : \"Ver código completo\"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div\r\n              id=\"asm-scroll-container\"\r\n              className=\"flex-1 p-4 overflow-y-auto max-h-[calc(100vh-14rem)] scrollbar-transparent\"\r\n            >\r\n              <div className=\"space-y-3\">\r\n                {(() => {\n                  if (asmByLine && !showFullAsm) {\n                    const targetLine = stack[activeSnap]?.line\n                    const prolog: string[] = []\n                    const mainStartLine =\n                      stack\n                        .filter((s) => (s.func || \"\").toLowerCase() === \"main\" && (s.line ?? 0) > 0)\n                        .map((s) => s.line ?? Number.MAX_SAFE_INTEGER)\n                        .reduce((a, b) => Math.min(a, b), Number.MAX_SAFE_INTEGER)\n                    if (asm) {\n                      const linesAll = (asm || \"\").split(\"\\n\")\n                      for (const l of linesAll) {\n                        if (l.startsWith(\"# SNAPIDX\")) break\n                        if (l.trim().length > 0) prolog.push(l)\n                      }\r\n                    }\r\n\r\n                    const labelByLine = (line: number, instrs: string[]) => {\n                      const snap = stack.find((s) => s.line === line)\n                      if (snap?.label) {\n                        const lbl = snap.label.toLowerCase()\n                        if (lbl.includes(\"start\")) return \"\"\n                        return snap.label\n                      }\n                      const joined = instrs.join(\" \")\n                      if (joined.includes(\"printf@PLT\")) return \"print\"\n                      if (joined.includes(\"call \")) return \"call\"\n                      if (joined.includes(\"pushq %rbp\") && joined.includes(\"movq %rsp, %rbp\")) return \"prolog\"\n                      if (joined.includes(\".globl\")) return \"func\"\n                      return \"\"\n                    }\n\n                    let blocks = Object.entries(asmByLine)\n                      .map(([lineStr, instrs]) => ({\n                        line: parseInt(lineStr, 10),\n                        instrs,\n                        label: labelByLine(parseInt(lineStr, 10), instrs),\n                      }))\n                      .filter((b) => !Number.isNaN(b.line) && b.line >= -1)\n                    if (prolog.length > 0) {\n                      blocks.unshift({ line: -1, instrs: prolog, label: \"prolog\" })\n                    }\n                    blocks.sort((a, b) => a.line - b.line)\n                    const firstPosLine = blocks.find((b) => b.line >= 1)?.line ?? Number.MAX_SAFE_INTEGER\n                    const mainStart = mainStartLine === Number.MAX_SAFE_INTEGER ? firstPosLine : mainStartLine\n                    const prologBlocksRaw = blocks.filter((b) => b.line < mainStart)\n                    const prologBlocks =\n                      prologBlocksRaw.length > 1 ? prologBlocksRaw.slice(1) : prologBlocksRaw // quitar el primer prolog, dejar el resto\n                    const mainBlocks = blocks.filter((b) => b.line >= mainStart)\n\n                    const mergedBlocks = [...prologBlocks, ...mainBlocks]\n                    let activeLine = targetLine\n                    if (activeLine !== undefined && activeLine <= 0) {\n                      activeLine = prologBlocks[0]?.line ?? -1\n                    } else if (activeLine === undefined && mergedBlocks.length > 0) {\n                      activeLine = mergedBlocks[mergedBlocks.length - 1].line\n                    }\n\n                    const renderBlock = (blk: typeof blocks[number], idx: number) => (\n                      <div\n                        key={`${blk.line}-${idx}`}\n                        className={`rounded-lg border border-border bg-muted/30 p-3 ${\n                          activeLine === blk.line ? \"ring-2 ring-accent/60\" : \"\"\n                        }`}\n                        ref={activeLine === blk.line ? (el) => (asmActiveRef.current = el) : undefined}\n                      >\n                        <div className=\"flex items-center justify-between text-[11px] font-mono uppercase text-muted-foreground mb-2\">\n                          <span>{blk.line < 1 ? \"Prolog\" : `Línea ${blk.line}`}</span>\n                          <span className=\"text-foreground font-semibold\">{blk.label || \"\"}</span>\n                        </div>\n                        <pre className=\"font-mono text-xs text-accent-foreground whitespace-pre-wrap leading-relaxed\">\n                          {blk.instrs.length ? blk.instrs.join(\"\\n\") : \"// sin instrucciones\"}\n                        </pre>\n                      </div>\n                    )\n\n                    return <div className=\"space-y-2\">{mergedBlocks.map((blk, idx) => renderBlock(blk, idx))}</div>\n                  }\n\n                  // Si no hay asm_by_line, mostrar ASM completo\n                  return (\r\n                    <div className=\"rounded-lg border border-border bg-muted/30 p-3\">\r\n                      <pre className=\"font-mono text-xs text-accent-foreground whitespace-pre-wrap leading-relaxed\">\r\n                        {(asm || \"\")\r\n                          .split(\"\\n\")\r\n                          .filter((l) => !l.trim().startsWith(\"# SNAPIDX\"))\r\n                          .join(\"\\n\") || \"// sin instrucciones\"}\r\n                      </pre>\r\n                    </div>\r\n                  )\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Columna Memoria / Logs */}\r\n          <div className=\"rounded-xl bg-card border border-border overflow-hidden flex flex-col\">\r\n            <div className=\"flex items-center gap-1 px-2 h-11 border-b border-border bg-muted/30\">\r\n              {([\"memory\", \"logs\"] as const).map((tab) => (\r\n                <button\r\n                  key={tab}\r\n                  onClick={() => setActiveTab(tab)}\r\n                  className={`flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${\r\n                    activeTab === tab\r\n                      ? \"bg-accent text-accent-foreground shadow-sm\"\r\n                      : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\r\n                  }`}\r\n                >\r\n                  {tab === \"memory\" && <Activity size={12} />}\r\n                  {tab === \"logs\" && <AlertCircle size={12} />}\r\n                  <span className=\"capitalize\">{tab === \"memory\" ? \"Memoria\" : \"Logs\"}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"flex-1 overflow-hidden\">\r\n              {activeTab === \"memory\" && (\r\n                <div className=\"h-full\">\r\n                  <MemoryVisualizer\r\n                    imageBase64={image}\r\n                    stack={stack}\r\n                    output={output}\r\n                    activeIndex={activeSnap}\r\n                    setActiveIndex={setActiveSnap}\r\n                  />\r\n                </div>\r\n              )}\r\n              {activeTab === \"logs\" && (\r\n                <div className=\"h-full p-4 overflow-auto\">\r\n                  <pre className=\"font-mono text-xs text-warning whitespace-pre-wrap leading-relaxed\">\r\n                    {logs || <span className=\"text-muted-foreground italic\">No hay logs disponibles.</span>}\r\n                  </pre>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}